<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mehrsprachiger Bingo-Anrufer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
            padding: 20px;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .main-controls {
            width: 100%;
            display: flex;
            justify-content: flex-end;
            padding: 0 20px;
            box-sizing: border-box;
        }
        .settings-button {
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #fff;
            margin-bottom: 20px;
        }
        #status-message {
            color: #888;
            font-style: italic;
            margin-bottom: 15px;
        }
        .settings-modal {
            display: none; /* Standardmäßig ausgeblendet */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            justify-content: center;
            align-items: center;
        }
        .settings-modal.show {
            display: flex;
        }
        .modal-content {
            background-color: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 500px;
            position: relative;
        }
        .close-button {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
        }
        .close-button:hover {
            color: #333;
        }
        .settings-option {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .settings-option:last-child {
            border-bottom: none;
        }
        .settings-option h3 {
            margin: 0 0 10px 0;
            font-size: 18px;
        }
        .settings-option label {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            cursor: pointer;
        }
        .settings-option input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
        }
        .settings-option select {
            margin-left: 28px;
            width: calc(100% - 28px);
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        .save-button {
            width: 100%;
            padding: 12px;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            background-color: #007BFF;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .save-button:hover {
            background-color: #0056b3;
        }
        .container {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 10px;
            max-width: 800px;
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .number-button {
            width: 60px;
            height: 60px;
            font-size: 24px;
            font-weight: bold;
            border: 2px solid #007BFF;
            border-radius: 8px;
            background-color: #E6F3FF;
            color: #007BFF;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }
        .number-button:hover {
            background-color: #007BFF;
            color: #fff;
        }
        .number-button:active {
            transform: scale(0.95);
        }
        /* Responsives Layout für kleinere Bildschirme */
        @media (max-width: 600px) {
            .container {
                grid-template-columns: repeat(5, 1fr);
            }
            .number-button {
                width: 50px;
                height: 50px;
            }
        }
    </style>
</head>
<body>

    <div class="main-controls">
        <button class="settings-button" id="settingsButton">Einstellungen</button>
    </div>

    <p id="status-message">Stimmen werden geladen...</p>
    <h1>Klicken Sie auf eine Zahl</h1>
    <div class="container" id="button-container"></div>

    <div id="settingsModal" class="settings-modal">
        <div class="modal-content">
            <span class="close-button" id="closeModal">&times;</span>
            <h2>Einstellungen</h2>
            <div id="language-settings-container">
                </div>
            <button class="save-button" id="saveSettingsButton">Einstellungen speichern</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('button-container');
            const settingsButton = document.getElementById('settingsButton');
            const settingsModal = document.getElementById('settingsModal');
            const closeModalButton = document.getElementById('closeModal');
            const saveSettingsButton = document.getElementById('saveSettingsButton');
            const langSettingsContainer = document.getElementById('language-settings-container');
            const statusMessage = document.getElementById('status-message');
            
            let availableVoices = [];
            let userSettings = {
                languages: ['de'],
                voices: { 'de': null, 'en': null, 'es': null, 'fr': null }
            };
            
            const languageData = {
                de: { prefix: 'Nummer', langCode: 'de-DE', name: 'Deutsch' },
                en: { prefix: 'Number', langCode: 'en-US', name: 'Englisch' },
                es: { prefix: 'Número', langCode: 'es-ES', name: 'Spanisch' },
                fr: { prefix: 'Numéro', langCode: 'fr-FR', name: 'Französisch' }
            };

            const numberData = {
                1: { de: 'eins', en: 'one', es: 'uno', fr: 'un' },
                2: { de: 'zwei', en: 'two', es: 'dos', fr: 'deux' },
                3: { de: 'drei', en: 'three', es: 'tres', fr: 'trois' },
                4: { de: 'vier', en: 'four', es: 'cuatro', fr: 'quatre' },
                5: { de: 'fünf', en: 'five', es: 'cinco', fr: 'cinq' },
                6: { de: 'sechs', en: 'six', es: 'seis', fr: 'six' },
                7: { de: 'sieben', en: 'seven', es: 'siete', fr: 'sept' },
                8: { de: 'acht', en: 'eight', es: 'ocho', fr: 'huit' },
                9: { de: 'neun', en: 'nine', es: 'nueve', fr: 'neuf' },
                10: { de: 'zehn', en: 'ten', es: 'diez', fr: 'dix' },
                11: { de: 'elf', en: 'eleven', es: 'once', fr: 'onze' },
                12: { de: 'zwölf', en: 'twelve', es: 'doce', fr: 'douze' },
                13: { de: 'dreizehn', en: 'thirteen', es: 'trece', fr: 'treize' },
                14: { de: 'vierzehn', en: 'fourteen', es: 'catorce', fr: 'quatorze' },
                15: { de: 'fünfzehn', en: 'fifteen', es: 'quince', fr: 'quinze' },
                16: { de: 'sechzehn', en: 'sixteen', es: 'dieciséis', fr: 'seize' },
                17: { de: 'siebzehn', en: 'seventeen', es: 'diecisiete', fr: 'dix-sept' },
                18: { de: 'achtzehn', en: 'eighteen', es: 'dieciocho', fr: 'dix-huit' },
                19: { de: 'neunzehn', en: 'nineteen', es: 'diecinueve', fr: 'dix-neuf' },
                20: { de: 'zwanzig', en: 'twenty', es: 'veinte', fr: 'vingt' },
                21: { de: 'einundzwanzig', en: 'twenty-one', es: 'veintiuno', fr: 'vingt et un' },
                22: { de: 'zweiundzwanzig', en: 'twenty-two', es: 'veintidós', fr: 'vingt-deux' },
                23: { de: 'dreiundzwanzig', en: 'twenty-three', es: 'veintitrés', fr: 'vingt-trois' },
                24: { de: 'vierundzwanzig', en: 'twenty-four', es: 'veinticuatro', fr: 'vingt-quatre' },
                25: { de: 'fünfundzwanzig', en: 'twenty-five', es: 'veinticinco', fr: 'vingt-cinq' },
                26: { de: 'sechsundzwanzig', en: 'twenty-six', es: 'veintiséis', fr: 'vingt-six' },
                27: { de: 'siebenundzwanzig', en: 'twenty-seven', es: 'veintisiete', fr: 'vingt-sept' },
                28: { de: 'achtundzwanzig', en: 'twenty-eight', es: 'veintiocho', fr: 'vingt-huit' },
                29: { de: 'neunundzwanzig', en: 'twenty-nine', es: 'veintinueve', fr: 'vingt-neuf' },
                30: { de: 'dreißig', en: 'thirty', es: 'treinta', fr: 'trente' },
                31: { de: 'einunddreißig', en: 'thirty-one', es: 'treinta y uno', fr: 'trente et un' },
                32: { de: 'zweiunddreißig', en: 'thirty-two', es: 'treinta y dos', fr: 'trente-deux' },
                33: { de: 'dreiunddreißig', en: 'thirty-three', es: 'treinta y tres', fr: 'trente-trois' },
                34: { de: 'vierunddreißig', en: 'thirty-four', es: 'treinta y cuatro', fr: 'trente-quatre' },
                35: { de: 'fünfunddreißig', en: 'thirty-five', es: 'treinta y cinco', fr: 'trente-cinq' },
                36: { de: 'sechsunddreißig', en: 'thirty-six', es: 'treinta y seis', fr: 'trente-six' },
                37: { de: 'siebenunddreißig', en: 'thirty-seven', es: 'treinta y sieben', fr: 'trente-sept' },
                38: { de: 'achtunddreißig', en: 'thirty-eight', es: 'treinta y ocho', fr: 'trente-huit' },
                39: { de: 'neununddreißig', en: 'thirty-nine', es: 'treinta y neun', fr: 'trente-neuf' },
                40: { de: 'vierzig', en: 'forty', es: 'cuarenta', fr: 'quarante' },
                41: { de: 'einundvierzig', en: 'forty-one', es: 'cuarenta y uno', fr: 'quarante et un' },
                42: { de: 'zweiundvierzig', en: 'forty-two', es: 'cuarenta y dos', fr: 'quarante-deux' },
                43: { de: 'dreiundvierzig', en: 'forty-three', es: 'cuarenta y drei', fr: 'quarante-trois' },
                44: { de: 'vierundvierzig', en: 'forty-four', es: 'cuarenta y vier', fr: 'quarante-quatre' },
                45: { de: 'fünfundvierzig', en: 'forty-five', es: 'cuarenta y cinco', fr: 'quarante-cinq' },
                46: { de: 'sechsundvierzig', en: 'forty-six', es: 'cuarenta y sechs', fr: 'quarante-six' },
                47: { de: 'siebenundvierzig', en: 'forty-seven', es: 'cuarenta y sieben', fr: 'quarante-sept' },
                48: { de: 'achtundvierzig', en: 'forty-eight', es: 'cuarenta y acht', fr: 'quarante-huit' },
                49: { de: 'neunundvierzig', en: 'forty-nine', es: 'cuarenta y neun', fr: 'quarante-neuf' },
                50: { de: 'fünfzig', en: 'fifty', es: 'cincuenta', fr: 'cinquante' },
                51: { de: 'einundfünfzig', en: 'fifty-one', es: 'cincuenta y uno', fr: 'cinquante et un' },
                52: { de: 'zweiundfünfzig', en: 'fifty-two', es: 'cincuenta y dos', fr: 'cinquante-deux' },
                53: { de: 'dreiundfünfzig', en: 'fifty-three', es: 'cincuenta y drei', fr: 'cinquante-trois' },
                54: { de: 'vierundfünfzig', en: 'fifty-four', es: 'cincuenta y vier', fr: 'cinquante-quatre' },
                55: { de: 'fünfundfünfzig', en: 'fifty-five', es: 'cincuenta y cinco', fr: 'cinquante-cinq' },
                56: { de: 'sechsundfünfzig', en: 'fifty-six', es: 'cincuenta y sechs', fr: 'cinquante-six' },
                57: { de: 'siebenundfünfzig', en: 'fifty-seven', es: 'cincuenta y sieben', fr: 'cinquante-sept' },
                58: { de: 'achtundfünfzig', en: 'fifty-eight', es: 'cincuenta y acht', fr: 'cinquante-huit' },
                59: { de: 'neunundfünfzig', en: 'fifty-nine', es: 'cincuenta y neun', fr: 'cinquante-neuf' },
                60: { de: 'sechzig', en: 'sixty', es: 'sesenta', fr: 'soixante' },
                61: { de: 'einundsechzig', en: 'sixty-one', es: 'sesenta y uno', fr: 'soixante et un' },
                62: { de: 'zweiundsechzig', en: 'sixty-two', es: 'sesenta y dos', fr: 'soixante-deux' },
                63: { de: 'dreiundsechzig', en: 'sixty-three', es: 'sesenta y drei', fr: 'soixante-trois' },
                64: { de: 'vierundsechzig', en: 'sixty-four', es: 'sesenta y vier', fr: 'soixante-quatre' },
                65: { de: 'fünfundsechzig', en: 'sixty-five', es: 'sesenta y cinco', fr: 'soixante-cinq' },
                66: { de: 'sechsundsechzig', en: 'sixty-six', es: 'sesenta y sechs', fr: 'soixante-six' },
                67: { de: 'siebenundsechzig', en: 'sixty-seven', es: 'sesenta y sieben', fr: 'soixante-sept' },
                68: { de: 'achtundsechzig', en: 'sixty-eight', es: 'sesenta y acht', fr: 'soixante-huit' },
                69: { de: 'neunundsechzig', en: 'sixty-nine', es: 'sesenta y neun', fr: 'soixante-neuf' },
                70: { de: 'siebzig', en: 'seventy', es: 'setenta', fr: 'soixante-dix' },
                71: { de: 'einundsiebzig', en: 'seventy-one', es: 'setenta y uno', fr: 'soixante et onze' },
                72: { de: 'zweiundsiebzig', en: 'seventy-two', es: 'setenta y dos', fr: 'soixante-douze' },
                73: { de: 'dreiundsiebzig', en: 'seventy-three', es: 'setenta y drei', fr: 'soixante-treize' },
                74: { de: 'vierundsiebzig', en: 'seventy-four', es: 'setenta y vier', fr: 'soixante-quatorze' },
                75: { de: 'fünfundsiebzig', en: 'seventy-five', es: 'setenta y cinco', fr: 'soixante-quinze' }
            };

            // Lade die Stimmen, wenn das Dokument fertig ist
            let availableVoices = [];
            let userSettings = {
                languages: ['de'],
                voices: { 'de': null, 'en': null, 'es': null, 'fr': null }
            };

            function updateStatus(message, color) {
                statusMessage.textContent = message;
                statusMessage.style.color = color;
                statusMessage.style.display = 'block';
            }

            function voicesLoaded() {
                availableVoices = window.speechSynthesis.getVoices();
                updateStatus('Stimmen geladen.', 'green');
                setTimeout(() => statusMessage.style.display = 'none', 3000);
                populateSettingsModal();
                console.log('Voices loaded successfully.');
            }

            if ('speechSynthesis' in window) {
                // Check if voices are already loaded
                if (window.speechSynthesis.getVoices().length > 0) {
                    voicesLoaded();
                } else {
                    window.speechSynthesis.onvoiceschanged = voicesLoaded;
                }
            } else {
                updateStatus('Sprachsynthese wird von Ihrem Browser nicht unterstützt.', 'red');
            }

            // Funktionen zur Anzeige des Modals
            settingsButton.addEventListener('click', () => {
                settingsModal.classList.add('show');
                populateSettingsModal();
            });

            closeModalButton.addEventListener('click', () => {
                settingsModal.classList.remove('show');
            });

            // Funktion, um die Stimmen im Modal zu füllen
            function populateSettingsModal() {
                langSettingsContainer.innerHTML = '';
                const availableVoiceNames = availableVoices.map(v => v.name);

                Object.keys(languageData).forEach(langKey => {
                    const lang = languageData[langKey];
                    const settingOption = document.createElement('div');
                    settingOption.className = 'settings-option';

                    const checkboxId = `lang-checkbox-${langKey}`;
                    const selectId = `voice-select-${langKey}`;
                    
                    const isSelected = userSettings.languages.includes(langKey);

                    settingOption.innerHTML = `
                        <label for="${checkboxId}">
                            <input type="checkbox" id="${checkboxId}" data-lang="${langKey}" ${isSelected ? 'checked' : ''}>
                            <h3>${lang.name}</h3>
                        </label>
                        <select id="${selectId}"></select>
                    `;
                    
                    langSettingsContainer.appendChild(settingOption);
                    
                    // Fülle die Stimmen-Dropdown-Liste
                    const voiceSelect = document.getElementById(selectId);
                    const filteredVoices = availableVoices.filter(v => v.lang.startsWith(lang.langCode));
                    
                    if (filteredVoices.length > 0) {
                        filteredVoices.forEach(voice => {
                            const option = document.createElement('option');
                            option.textContent = `${voice.name} (${voice.lang}) ${voice.default ? ' — Standard' : ''}`;
                            option.value = voice.name;
                            voiceSelect.appendChild(option);
                        });
                        
                        if (userSettings.voices[langKey] && availableVoiceNames.includes(userSettings.voices[langKey])) {
                            voiceSelect.value = userSettings.voices[langKey];
                        } else {
                            userSettings.voices[langKey] = voiceSelect.value;
                        }
                    } else {
                        const option = document.createElement('option');
                        option.textContent = 'Keine Stimmen verfügbar';
                        voiceSelect.appendChild(option);
                        userSettings.voices[langKey] = null;
                    }
                });
            }

            // Funktion zum Speichern der Einstellungen
            saveSettingsButton.addEventListener('click', () => {
                userSettings.languages = [];
                Object.keys(languageData).forEach(langKey => {
                    const checkbox = document.getElementById(`lang-checkbox-${langKey}`);
                    const select = document.getElementById(`voice-select-${langKey}`);

                    if (checkbox.checked) {
                        userSettings.languages.push(langKey);
                        userSettings.voices[langKey] = select.value;
                    } else {
                        userSettings.voices[langKey] = null;
                    }
                });
                settingsModal.classList.remove('show');
            });

            // Funktion zur Sprachausgabe
            function speakNumber(number) {
                if (userSettings.languages.length === 0) {
                    alert('Bitte wählen Sie in den Einstellungen mindestens eine Sprache aus.');
                    return;
                }
                if (availableVoices.length === 0) {
                    alert('Die Stimmen werden noch geladen. Bitte warten Sie einen Moment.');
                    return;
                }

                let speakingIndex = 0;
                
                function speakNext() {
                    if (speakingIndex < userSettings.languages.length) {
                        const langKey = userSettings.languages[speakingIndex];
                        const data = languageData[langKey];
                        const numberName = numberData[number][langKey];
                        
                        const utterance = new SpeechSynthesisUtterance(`${data.prefix} ${numberName}`);
                        
                        const voice = availableVoices.find(v => v.name === userSettings.voices[langKey]);
                        if (voice) {
                            utterance.voice = voice;
                        }
                        
                        utterance.onend = () => {
                            speakingIndex++;
                            speakNext();
                        };
                        
                        window.speechSynthesis.speak(utterance);
                    }
                }
                
                window.speechSynthesis.cancel();
                speakNext();
            }
            
            // Erstellen der 75 Buttons
            for (let i = 1; i <= 75; i++) {
                const button = document.createElement('button');
                button.classList.add('number-button');
                button.textContent = i;
                button.onclick = () => speakNumber(i);
                container.appendChild(button);
            }
        });
    </script>

</body>
</html>
